#!/bin/sh

# todo: move this to my scripts repo and add then to the PATH

# Fuzzy find a file from $HOME,
# move to the file directory,
# and then opens it on the default EDITOR.
move_to_file() {
    file="$(fd -tf -tl -H . ~ | fzf -i +m --black)"
    [ -n "$file" ] && cd "$(dirname "$file")" && $EDITOR "$file" || return 1
}

# Alias of git command that also handles
# my dotfiles repo.
g() {
    # todo: git commands autocomplete. ( At least I have now autocomplete
    # of file paths, so i dont think is that big of a deal. )

    # todo: for now Im printing everytime that we are not in 
    # a git directory. An export to disable it would be nice.

    git_output="$(command git -c color.ui=always -c color.status=always "$@" 2>&1)"
    [ "${git_output#*not a git repository}" != "$git_output" ] && \
        echo "Not a git repository... perfoming action on dotfiles." && dotfiles "$@" || \
        echo "$git_output"
}
