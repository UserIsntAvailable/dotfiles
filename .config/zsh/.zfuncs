
# todo: move this to my scripts repo and add then to the PATH
# todo: make this functions POSIX compliant

# Fuzzy find a file from $HOME,
# move to the file directory,
# and then opens it on the default EDITOR.
move_to_file() {
    file="$(fd -tf -tl -H . ~ | fzf -i +m --black)"
    [[ -n "$file" ]] && cd "$(dirname "$file")" && $EDITOR "$file" || return 1
}

# Handle calls to the git command
git() {
    # todo: tab completion doesnt work for now.
    # I need to find a better way to achieve this.

    # todo: for now Im printing everytime that we are not in 
    # a git directory. An export to disable it would be nice.
    
    # fix: tabbing with no arguments prints "Not a git repository... perfoming action on dotfiles."

    git_output="$(command git -c color.ui=always -c color.status=always "$@" 2>&1)"
    [[ "$git_output" == *"not a git repository"* ]] && \
        echo "Not a git repository... perfoming action on dotfiles." && dotfiles "$@" || \
        echo "$git_output"
}
